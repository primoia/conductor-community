{
  "saga_id": "saga-002",
  "title": "Seleção de Provider no Chat",
  "description": "Implementação da funcionalidade de seleção de AI Provider (Claude, Gemini) no chat, permitindo mudança antes de cada mensagem",
  "status": "pending",
  "created_at": "2025-10-23T12:00:00Z",
  "updated_at": "2025-10-23T12:00:00Z",
  "phases": [
    {
      "phase_id": "fase-01",
      "title": "Frontend - UI do Seletor de Provider",
      "description": "Adicionar componente visual de seleção de provider no ChatInputComponent",
      "status": "pending",
      "assigned_to": "agente-frontend",
      "dependencies": [],
      "files_to_modify": [
        "src/conductor-web/src/app/shared/conductor-chat/components/chat-input/chat-input.component.html",
        "src/conductor-web/src/app/shared/conductor-chat/components/chat-input/chat-input.component.ts",
        "src/conductor-web/src/app/shared/conductor-chat/components/chat-input/chat-input.component.scss"
      ],
      "playbook_file": "playbook/fase-01-frontend-ui-seletor.md",
      "validation_checklist": []
    },
    {
      "phase_id": "fase-02",
      "title": "Frontend - Integração com AgentService",
      "description": "Integrar seletor com fluxo de envio de mensagem e AgentService",
      "status": "pending",
      "assigned_to": "agente-frontend",
      "dependencies": ["fase-01"],
      "files_to_modify": [
        "src/conductor-web/src/app/shared/conductor-chat/conductor-chat.component.ts",
        "src/conductor-web/src/app/services/agent.service.ts"
      ],
      "playbook_file": "playbook/fase-02-frontend-integracao-service.md",
      "validation_checklist": []
    },
    {
      "phase_id": "fase-03",
      "title": "Backend Gateway - Modelos e Propagação",
      "description": "Adicionar campo ai_provider nos modelos do gateway e propagar para Conductor CLI",
      "status": "pending",
      "assigned_to": "agente-backend",
      "dependencies": ["fase-02"],
      "files_to_modify": [
        "src/conductor-gateway/src/api/routes/agents.py",
        "src/conductor-gateway/src/clients/conductor_client.py"
      ],
      "playbook_file": "playbook/fase-03-backend-gateway-modelos.md",
      "validation_checklist": []
    }
  ],
  "global_context": {
    "providers_suportados": ["claude", "gemini"],
    "hierarquia_resolucao": [
      "1. Provider enviado pelo frontend (cli_provider)",
      "2. Provider definido no agent definition.yaml",
      "3. Provider padrão do config.yaml",
      "4. Provider de fallback do config.yaml"
    ],
    "backend_cli_status": "JÁ IMPLEMENTADO - ConductorExecuteRequest já recebe ai_provider e Container.get_ai_provider() já faz resolução hierárquica",
    "escopo": "Apenas seleção de provider - NÃO incluir testes, NÃO subir containers"
  },
  "metrics": {
    "total_phases": 3,
    "completed_phases": 0,
    "pending_phases": 3,
    "blocked_phases": 0
  }
}
